<!DOCTYPE html> <html lang=en> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SZ2C67981H"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-SZ2C67981H');
    </script> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=canonical href=https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/> <title>Editing Commits in a Pull Request; Make it your Last Action | Kevin Jalbert</title> <meta name=description content="If you are going to edit commits in a collapsing fashion (i.e., amend/squash) in a pull request, make it your last action before merging to avoid confusing code reviewers."/> <meta name=keywords content="process, git, collaboration"/> <meta name=datePublished content="2019-04-30 00:00:00 UTC"/> <meta property="og:article:published_time" content="2019-04-30 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2019-04-30 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/"/> <meta property="og:url" content="https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="If you are going to edit commits in a collapsing fashion (i.e., amend/squash) in a pull request, make it your last action before merging to avoid confusing code reviewers."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/2019-04-30-editing-commits-in-a-pull-request-make-it-your-last-action/pair-programming.jpg"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Editing Commits in a Pull Request; Make it your Last Action"/> <meta property="og:description" content="If you are going to edit commits in a collapsing fashion (i.e., amend/squash) in a pull request, make it your last action before merging to avoid confusing code reviewers."/> <meta property="og:image" content="https://kevinjalbert.com/images/2019-04-30-editing-commits-in-a-pull-request-make-it-your-last-action/pair-programming.jpg"/> <meta property="og:title" content="Editing Commits in a Pull Request; Make it your Last Action"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Editing Commits in a Pull Request; Make it your Last Action",
       "keywords": "process, git, collaboration",
       "url": "https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/",
       "datePublished": "2019-04-30 00:00:00 UTC",
       "dateModified": "2019-04-30 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Editing Commits in a Pull Request; Make it your Last Action</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">April 30, 2019 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>5 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/editing-commits-in-a-pull-request-make-it-your-last-action/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/collaboration/">collaboration</a> <a href="/tags/git/">git</a> <a href="/tags/process/">process</a> </div> </div> </div> <img src=/images/2019-04-30-editing-commits-in-a-pull-request-make-it-your-last-action/pair-programming.jpg> <i><p><a href="https://flickr.com/photos/glodjib/16146549307" title="Pair Programming">Pair Programming</a> by <a href="https://flickr.com/people/glodjib">haslo</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/2.0/">CC BY-NC-ND</a></p> </i> <div class=article__separator></div> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> If you enjoy this, consider subscribing to my newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <p style="text-align: center">I aim to publish one article a month</p> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="E-mail address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <p><em>This post should be seen through the lens of working with a team using Git and GitHub during the collaboration of developing software. There is also the assumption that the reader has a firm understanding of Git.</em></p> <p>Editing commits are more common than you might think. Anytime you <em>amend, rebase, or squash</em> you are modifying commits, in which the affected commits&rsquo; SHA changes.</p> <p>In a collaborative setting (i.e., a Pull Request in GitHub), we want to <a href="https://git-scm.com/book/en/v1/Git-Branching-Rebasing#The-Perils-of-Rebasing">minimize editing commits</a>. For many developers, it is worthwhile to keep the Git history as clean and linear as possible. The best way to achieve that simplicity is by reducing multiple commits or rebasing off of master to avoid a merge conflict/commit.</p> <p><strong>If you are going to edit commits in a collapsing fashion (i.e., amend/squash) in a pull request, make it your last action before merging to avoid confusing code reviewers.</strong></p> <h1>Editing Commits</h1> <p>For brevity, the details of how to edit commits can be found at the following <a href="https://thoughtbot.com/blog/git-interactive-rebase-squash-amend-rewriting-history">article by thoughtbot</a>. As touched on in my <a href="https://kevinjalbert.com/level-up-your-commit-messages/">previous post</a>, you can <em>hide the <a href="https://sethrobertson.github.io/GitBestPractices/#sausage">sausage making process</a></em> by amending and squashing commits. There are two main benefits to consolidating commits:</p> <ul> <li>The ability to <code>git bisect</code>, <code>git revert</code> and <code>git cherry-pick</code> work without much issue.</li> <li>Commits are <a href="https://www.freshconsulting.com/atomic-commits/">atomic</a> and provide better archaeological information in <code>git log</code> and <code>git blame</code> scenarios.</li> </ul> <h1>Cautiously Edit a Pull Request&rsquo;s Commits</h1> <p>As developers learn early on, when a branch is public you avoid carelessly rewriting the commit history. If you do need to get changes from another branch (i.e., master) into the feature branch, there are two options (<a href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">both which Atlassian covers in great detail</a>):</p> <ul> <li>The <em>safer</em> way is merging master into the feature branch, which in my opinion makes things a bit messy.</li> <li>The <em>cleaner</em> way is rebasing the feature branch onto master, which results in a more linear commit history.</li> </ul> <p>From my experience, I&rsquo;ve always gone with the rebase option as I value a simplified commit history. Incidentally, the two benefits mentioned in the previous section help with keeping the master branch simple and clean. In practice, this manifests as a final squashing effort before merging the pull request into master.</p> <p>Regardless, communication is key if you plan to edit the commits of a pull request. Collaborators need to know that they have to account for the rewritten history the next time they want to use or contribute to that branch.</p> <h1>Don&rsquo;t Edit Commits During Code Reviews</h1> <p>Imagine the following scenario:</p> <ol> <li>Bob is creating a new feature in his local branch.</li> <li>Bob pushes up the branch to GitHub and creates a pull request.</li> <li>Bob communicates that he wants feedback from Jane by requesting her as a reviewer.</li> <li>Jane makes some comments and good suggestions on the pull request.</li> <li>Bob makes changes to address the code review comments.</li> </ol> <p>Now here is where we can hit some diverging paths:</p> <ul> <li>Bob creates new commits based off the review comments.</li> <li>Bob amends the changes onto the last commit.</li> <li>Bob squashes the changes into other commits on the branch.</li> </ul> <p>In the three presented cases, Bob addressed the code review comments and the resulting code is identical &ndash; only the commits are different. The issue arises when he re-requests Jane to perform a subsequent review. As Jane has already left comments, she instinctively looks to see the <em>new</em> changes on the branch as these changes are more likely the ones that address the earlier code review comments. In the first case, these are represented as new commits, and it is easy enough to see the changes. In the second and third case, the changes are hidden inside previous commits. <strong>This makes it incredibly difficult to isolate the changes made since Jane last looked at the pull request.</strong></p> <p><img alt="View changes" width=1454 height=392 src="/images/2019-04-30-editing-commits-in-a-pull-request-make-it-your-last-action/view-changes.png"/></p> <p>The take away here is that during the code review phase, we want to ensure that the commits are additive and tell a complete story. A reviewer can and should see how the pull request has changed at each step of the process. The back-and-forth of getting feedback and adding new commits to address them is the collaborative flow for which we should aim.</p> <h1>Squash Before You Merge</h1> <p>Ultimately, we still want that clean commit history when we finally merge, and so we have to squash commits down at some point. As previously mentioned, editing commits during the active code review cycle is detrimental, so you wait until the pull request is approved and ready to be merged.</p> <p>A final rebase onto master might be needed to resolve any conflicts between the feature branch and master. If we do need this, it&rsquo;s sometimes useful to get a final check if you were not confident in the conflict resolution.</p> <p>Ideally, squashing commits results in no code changes from what was already reviewed. If, for whatever reason, there are some changes that need to be made, you&rsquo;d want some final eyes to check it over. With respect to making the squashing task easier for yourself, I recommend taking a look over the <a href="https://thoughtbot.com/blog/autosquashing-git-commits">auto-squashing feature built into Git</a>.</p> <p>It&rsquo;s worth mentioning that GitHub also has a <a href="https://help.github.com/en/articles/about-pull-request-merges#squash-and-merge-your-pull-request-commits"><em>Squash and Merge</em> option</a>, which does the squashing for you. This is a decent approach if your team is okay with all the changes being compressed down into one commit on master. I personally prefer having the finer grain control over how I structure my atomic commits.</p> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blob/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script>