<!DOCTYPE html> <html lang=en> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SZ2C67981H"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-SZ2C67981H');
    </script> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <link rel=canonical href=https://kevinjalbert.com/enhanced-vim-searching/> <title>Enhanced Vim Searching | Kevin Jalbert</title> <meta name=description content="Vanilla vim offers fairly powerful searching capabilities within a buffer. It is possible to _enhance_ vim's searching capabilities even further with vim plugins. Using several plugins, keymappings..."/> <meta name=keywords content=vim /> <meta name=datePublished content="2016-04-30 00:00:00 UTC"/> <meta property="og:article:published_time" content="2016-04-30 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2016-04-30 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/enhanced-vim-searching/"/> <meta property="og:url" content="https://kevinjalbert.com/enhanced-vim-searching/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="Vanilla vim offers fairly powerful searching capabilities within a buffer. It is possible to _enhance_ vim's searching capabilities even further with vim plugins. Using several plugins, keymappings and settings, we can improve upon vim's search."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/kevin-jalbert.jpg"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Enhanced Vim Searching"/> <meta property="og:description" content="Vanilla vim offers fairly powerful searching capabilities within a buffer. It is possible to _enhance_ vim's searching capabilities even further with vim plugins. Using several plugins, keymappings and settings, we can improve upon vim's search."/> <meta property="og:image" content="https://kevinjalbert.com/images/kevin-jalbert.jpg"/> <meta property="og:title" content="Enhanced Vim Searching"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Enhanced Vim Searching",
       "keywords": "vim",
       "url": "https://kevinjalbert.com/enhanced-vim-searching/",
       "datePublished": "2016-04-30 00:00:00 UTC",
       "dateModified": "2016-04-30 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/enhanced-vim-searching/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Enhanced Vim Searching</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">April 30, 2016 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>2 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/enhanced-vim-searching/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/vim/">vim</a> </div> </div> </div> <div class=article__separator></div> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> If you enjoy this, consider subscribing to my newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <p style="text-align: center">I aim to publish one article a month</p> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="E-mail address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <h1>Basic Searching</h1> <p>Vim provides rather simple searching capabilities using the following keys while in normal mode:</p> <ul> <li><code>/</code> performs a <em>forward</em> search of the provided pattern</li> <li><code>?</code> performs a <em>backward</em> search of the provided pattern</li> <li><code>*</code> performs a <em>forward</em> search of the word under the cursor</li> <li><code>#</code> performs a <em>backward</em> search of the word under the cursor</li> <li><code>n</code> navigates to the <em>next</em> search occurrence</li> <li><code>N</code> navigates to the <em>previous</em> search occurrence</li> </ul> <p>These commands alone are vital to anyone working with text in Vim. Without any customization these search commands perform simple</p> <p><img alt="Basic Searching" width=906 height=626 src="/images/2016-04-30-enhanced-vim-searching/basic-searching.gif"/></p> <h1>Better Searching</h1> <p>Personally, I always apply the following to make my searching slightly more responsive with visual feedback:</p> <div class=highlight><pre class="highlight viml"><code><span class="k">set</span> hlsearch
<span class="k">set</span> incsearch

<span class="c">" This unsets the 'last search pattern' register by hitting ;</span>
nnoremap ; <span class="p">:</span><span class="k">noh</span><span class="p">&lt;</span>CR<span class="p">&gt;:&lt;</span>backspace<span class="p">&gt;</span>
</code></pre></div> <p>This allows our searches to <em>incrementally</em> highlight the first match, providing visual feedback on our pattern matching. In addition, when proceeding with the search all the matches of the pattern are highlighted to visually indicate possible next matches.</p> <p>As searching is a frequently used motion, I have added a map to <code>;</code> to clear any highlighting from the searches.</p> <p><img alt="Better Searching" width=910 height=630 src="/images/2016-04-30-enhanced-vim-searching/better-searching.gif"/></p> <h1>Enhance Searching</h1> <p>We can do better! Using a mixture of two vim plugins we can achieve an enhanced form of searching within vim:</p> <div class=highlight><pre class="highlight viml"><code><span class="c">" All around better searching (via Vundle's plugin manager)</span>
Bundle <span class="s1">'haya14busa/incsearch.vim'</span>
Bundle <span class="s1">'osyo-manga/vim-anzu'</span>
</code></pre></div> <p>First, we have a bunch of maps and settings to incorporate <a href="https://github.com/haya14busa/incsearch.vim"><code>incsearch.vim</code></a> and <a href="https://github.com/osyo-manga/vim-anzu"><code>vim-anzu</code></a> together:</p> <div class=highlight><pre class="highlight viml"><code><span class="c">" Use incsearch.vim for all search functions (with anzu for indication)</span>
map /  <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span>forward<span class="p">)</span>
map ?  <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span>backward<span class="p">)</span>
map <span class="k">g</span>/ <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span>stay<span class="p">)</span>
<span class="k">let</span> <span class="nv">g:incsearch</span>#auto_nohlsearch <span class="p">=</span> <span class="m">1</span>
<span class="k">set</span> hlsearch
map <span class="k">n</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span><span class="k">nohl</span><span class="p">)&lt;</span>Plug<span class="p">&gt;(</span>anzu<span class="p">-</span><span class="k">n</span><span class="p">-</span>with<span class="p">-</span>echo<span class="p">)</span>
map N <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span><span class="k">nohl</span><span class="p">)&lt;</span>Plug<span class="p">&gt;(</span>anzu<span class="p">-</span>N<span class="p">-</span>with<span class="p">-</span>echo<span class="p">)</span>
map * <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span><span class="k">nohl</span><span class="p">)&lt;</span>Plug<span class="p">&gt;(</span>anzu<span class="p">-</span><span class="k">star</span><span class="p">-</span>with<span class="p">-</span>echo<span class="p">)</span>
map # <span class="p">&lt;</span>Plug<span class="p">&gt;(</span>incsearch<span class="p">-</span><span class="k">nohl</span><span class="p">)&lt;</span>Plug<span class="p">&gt;(</span>anzu<span class="p">-</span>sharp<span class="p">-</span>with<span class="p">-</span>echo<span class="p">)</span>
<span class="k">let</span> <span class="nv">g:anzu_status_format</span> <span class="p">=</span> <span class="s2">"%p(%i/%l) %w"</span>
</code></pre></div> <p>By using <code>incsearch.vim</code> we not only gain access to other perks that it brings in it&rsquo;s toolkit, but it also handles our highlighting issue. Anytime the cursor moves after a search motion it <code>incsearch.vim</code> will automatically remove the highlighting, which saves us from using the previously mentioned <code>;</code> map for manually clearing the search highlighting. Secondly we have <code>vim-anzu</code> which indicates the current <em>index</em> of the search occurrence that you are at, it also indicates when you wrap around the bottom/top of the buffer.</p> <p><img alt="Enhanced Searching" width=942 height=628 src="/images/2016-04-30-enhanced-vim-searching/enhanced-searching.gif"/></p> <h1><em>tap tap tap</em> Enhance&hellip; <em>tap tap tap</em> Enhance Searching</h1> <p>We can go even further to <em>enhance</em> our searching by making use of another vim plugin, <a href="https://github.com/Lokaltog/vim-easymotion"><code>vim-easymotion</code></a> for better targeting our searches:</p> <div class=highlight><pre class="highlight viml"><code><span class="c">" Targeting our searching (via Vundle's plugin manager)</span>
Bundle <span class="s1">'Lokaltog/vim-easymotion'</span>
</code></pre></div> <p>By default <code>vim-easymotion</code> could be used on the common <code>/</code> searches to provide an intelligent way to <em>target</em> our searches. Although, this tramples over our previous work, and we lose the simplicity of our common <code>/</code> searches. The following function and augmentations allow <code>vim-easymotion</code> to be triggered off of a <code>/</code> search by hooking into the search by <code>incsearch.vim</code>.</p> <div class=highlight><pre class="highlight viml"><code><span class="c">" Integrate incsearch and easymotion</span>
<span class="c">" https://github.com/Lokaltog/vim-easymotion/issues/146#issuecomment-75443473</span>
<span class="c">" Can use / for 'normal searching', at anytime its possible to use &lt;space&gt; to</span>
<span class="c">" pass search over to easymotion. To use spaces in search you need to apply</span>
<span class="c">" them via the regex approach \s.</span>
augroup incsearch<span class="p">-</span>easymotion
  autocmd<span class="p">!</span>
  autocmd <span class="nb">User</span> IncSearchEnter autocmd<span class="p">!</span> incsearch<span class="p">-</span>easymotion<span class="p">-</span>impl
augroup END
augroup incsearch<span class="p">-</span>easymotion<span class="p">-</span>impl
  autocmd<span class="p">!</span>
augroup END
<span class="k">function</span><span class="p">!</span> IncsearchEasyMotion<span class="p">()</span> abort
  autocmd incsearch<span class="p">-</span>easymotion<span class="p">-</span>impl <span class="nb">User</span> IncSearchExecute <span class="p">:</span><span class="k">silent</span><span class="p">!</span> <span class="k">call</span> EasyMotion#Search<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
  <span class="k">return</span> <span class="s2">"\&lt;CR&gt;"</span>
<span class="k">endfunction</span>
<span class="k">let</span> <span class="nv">g:incsearch_cli_key_mappings</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span>   <span class="s2">"\&lt;Space&gt;"</span><span class="p">:</span> <span class="p">{</span>
<span class="se">\</span>       <span class="s1">'key'</span><span class="p">:</span> <span class="s1">'IncsearchEasyMotion()'</span><span class="p">,</span>
<span class="se">\</span>       <span class="s1">'noremap'</span><span class="p">:</span> <span class="m">1</span><span class="p">,</span>
<span class="se">\</span>       <span class="s1">'expr'</span><span class="p">:</span> <span class="m">1</span>
<span class="se">\</span>   <span class="p">}</span>
<span class="se">\</span> <span class="p">}</span>
</code></pre></div> <p><img alt="Targeted Searching" width=938 height=630 src="/images/2016-04-30-enhanced-vim-searching/targeted-searching.gif"/></p> <p>We finally have all-around better vim searching, by configuring three search related plugins to play nice with each other!</p> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blob/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script>