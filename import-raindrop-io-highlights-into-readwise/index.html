<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script> <link rel=canonical href=https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/> <title>Import Raindrop.io Highlights into Readwise | Kevin Jalbert</title> <meta name=description content="I really like how Raindrop.io handles highlights and bookmarking in general. As of the time of writing, there isn't any official solution to import Raindrop.io highlights into Readwise. Check out m..."/> <meta name=keywords content="knowledge, raindrop, readwise"/> <meta name=datePublished content="2022-06-28 00:00:00 UTC"/> <meta property="og:article:published_time" content="2022-06-28 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2022-06-28 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/"/> <meta property="og:url" content="https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="I really like how Raindrop.io handles highlights and bookmarking in general. As of the time of writing, there isn't any official solution to import Raindrop.io highlights into Readwise. Check out my script that bridges this gap until an official integration exists."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/2022-06-28-import-raindrop-io-highlights-into-readwise/output.png"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Import Raindrop.io Highlights into Readwise"/> <meta property="og:description" content="I really like how Raindrop.io handles highlights and bookmarking in general. As of the time of writing, there isn't any official solution to import Raindrop.io highlights into Readwise. Check out my script that bridges this gap until an official integration exists."/> <meta property="og:image" content="https://kevinjalbert.com/images/2022-06-28-import-raindrop-io-highlights-into-readwise/output.png"/> <meta property="og:title" content="Import Raindrop.io Highlights into Readwise"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Import Raindrop.io Highlights into Readwise",
       "keywords": "knowledge, raindrop, readwise",
       "url": "https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/",
       "datePublished": "2022-06-28 00:00:00 UTC",
       "dateModified": "2022-06-28 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> <script async src="/vendor/analytics/index.js"></script> <script async src="https://www.google-analytics.com/analytics.js"></script> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Import Raindrop.io Highlights into Readwise</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">June 28, 2022 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>2 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/import-raindrop-io-highlights-into-readwise/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/knowledge/">knowledge</a> <a href="/tags/raindrop/">raindrop</a> <a href="/tags/readwise/">readwise</a> </div> </div> </div> <img src=/images/2022-06-28-import-raindrop-io-highlights-into-readwise/output.png> <i><p>The output of the import script. Generated with <a href="https://carbon.now.sh/">Carbon.now.sh</a>.</p> </i> <div class=article__separator></div> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> If you enjoy this, consider subscribing to my newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <p style="text-align: center">I aim to publish one article a month</p> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="E-mail address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <h1>Raindrop.io</h1> <p>I&rsquo;ve recently discovered <a href="https://raindrop.io/">Raindrop.io</a> as a bookmarking/highlighting service. It has been refreshing to use as it exudes polish. The browser extension is nice as it indicates if you&rsquo;ve bookmarked the page already, shows you highlights on the page, and allows you to highlight the content of the page. The iOS client is also great and does everything I need. The cherry-on-top is that the <em>free</em> plan is very capable and has unlimited highlights per article.</p> <h1>Readwise</h1> <p>I&rsquo;ve been a user of <a href="https://readwise.io/">Readwise</a> for over two years at this point. It&rsquo;s an important service for me as it allows me to revisit article&rsquo;s key points that I&rsquo;ve highlighted. Readwise has many integrations to import highlights into it. I&rsquo;ve been using <a href="https://web.hypothes.is/">Hypothesis</a> for a while, which has an official Readwise integration.</p> <h1>No Official Integration</h1> <p>As I moved over to Raindrop.io, it dawned on me that Readwise doesn&rsquo;t yet have any official integration with Raindrop.io. I&rsquo;ve emailed Readwise about this and got the following:</p> <blockquote> <p>You&rsquo;re actually one of the first to request an integration with Raindrop.io. I&rsquo;ve noted your request in our system, so as more users request the integration then it&rsquo;ll move up in the queue to develop.</p> </blockquote> <p>I didn&rsquo;t want to wait around and I noticed that both services have an API&hellip;</p> <h1>Import Raindrop.io Highlights into Readwise</h1> <p>Looking at both the <a href="https://readwise.io/api_deets">Readwise API</a> and <a href="https://developer.raindrop.io/">Raindrop.io API</a>, it seemed fairly straight-forward to connect them up.</p> <ul> <li>Iterate highlights in Raindrop</li> <li>Import highlights to Readwise</li> </ul> <p>It was noted that Readwise <em>de-dupe highlights by title/author/text/source</em>url_, so the API was idempotent if I send the same highlights.</p> <p>I did hit a couple of snags in building my solution:</p> <ul> <li>Highlights didn&rsquo;t have the title or author of the article <ul> <li>I used <code>nokogiri</code> to fetch these from the article&rsquo;s URL</li> </ul></li> <li>How to know when I&rsquo;ve already processed a highlight <ul> <li>Highlights were ordered by last created.</li> <li>I keep track of the last uploaded highlight&rsquo;s ID from Readwise, this acts as the marker to know when I&rsquo;ve caught up with the last import.</li> <li>The marker ID is automatically recorded in the script for future executions.</li> </ul></li> </ul> <h1>Waiting for the Future Official Integration</h1> <p>My approach works and only requires to be run periodically. I&rsquo;ve been toying around with the idea of just having a <code>cron</code> run it for me hourly.</p> <p>I didn&rsquo;t put in annotations from Raindrop.io (as I&rsquo;m using the free plan for now), but it wouldn&rsquo;t be hard to add that.</p> <p>I didn&rsquo;t bother removing highlights from Readwise when highlights are <em>deleted</em> on Raindrop.io. I noted that this is the <a href="https://help.readwise.io/article/95-will-deleting-a-highlight-in-readwise-delete-the-original-or-vice-versa">default behaviour with Readwise according to their FAQ</a>:</p> <blockquote> <p>if you delete the highlight in the original source, the highlight will not be deleted in Readwise.</p> </blockquote> <p>An official integration would be nice, but until then this does the trick.</p> <h1>The Import Script</h1> <p>The following is the Ruby script for importing Raindrop.io highlights into Readwise. You need to acquire your API tokens for both services and substitute them into the placeholders.</p> <p>This <a href="https://gist.github.com/kevinjalbert/1d77add23d9bdaa615a5bd5c05328678">GitHub Gist</a> will be the canonical reference of the import script (and will see updates as needed).</p> <div class=highlight><pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s2">"httparty"</span>
<span class="nb">require</span> <span class="s2">"nokogiri"</span>
<span class="nb">require</span> <span class="s2">"open-uri"</span>
<span class="nb">require</span> <span class="s2">"uri"</span>

<span class="no">RAINDROP_AUTH_TOKEN</span><span class="o">=</span><span class="s2">"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span>
<span class="no">READWISE_AUTH_TOKEN</span><span class="o">=</span><span class="s2">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="no">LAST_SAVED_HIGHLIGHT</span><span class="o">=</span><span class="mo">000000000</span> <span class="c1"># &lt;- Keeps track of import position (Updates automatically)</span>

<span class="k">def</span> <span class="nf">title_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="no">URI</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="nf">at_css</span><span class="p">(</span><span class="s2">"title"</span><span class="p">).</span><span class="nf">text</span>
    <span class="k">return</span> <span class="n">title</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">domain_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
  <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">host</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/^www\./i</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">request_raindrop_highlights</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
  <span class="no">HTTParty</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">"https://api.raindrop.io/rest/v1/highlights?page=</span><span class="si">#{</span><span class="n">page</span><span class="si">}</span><span class="s2">&amp;perpage=50"</span><span class="p">,</span>
    <span class="ss">headers: </span><span class="p">{</span>
      <span class="s2">"Authorization"</span> <span class="o">=&gt;</span> <span class="s2">"Bearer </span><span class="si">#{</span><span class="no">RAINDROP_AUTH_TOKEN</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span> <span class="o">=&gt;</span> <span class="s2">"application/json"</span>
    <span class="p">},</span>
  <span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">save_highlight_to_readwise</span><span class="p">(</span><span class="n">highlight</span><span class="p">)</span>
  <span class="no">HTTParty</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s2">"https://readwise.io/api/v2/highlights/"</span><span class="p">,</span>
    <span class="ss">headers: </span><span class="p">{</span>
      <span class="s2">"Authorization"</span> <span class="o">=&gt;</span> <span class="s2">"Token </span><span class="si">#{</span><span class="no">READWISE_AUTH_TOKEN</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span> <span class="o">=&gt;</span> <span class="s2">"application/json"</span>
    <span class="p">},</span>
    <span class="ss">body: </span><span class="p">{</span>
      <span class="ss">highlights: </span><span class="p">[</span>
        <span class="p">{</span>
          <span class="ss">text: </span><span class="n">highlight</span><span class="p">[</span><span class="s2">"text"</span><span class="p">],</span>
          <span class="ss">title: </span><span class="n">title_from_url</span><span class="p">(</span><span class="n">highlight</span><span class="p">[</span><span class="s2">"link"</span><span class="p">]),</span>
          <span class="ss">author: </span><span class="n">domain_from_url</span><span class="p">(</span><span class="n">highlight</span><span class="p">[</span><span class="s2">"link"</span><span class="p">]),</span>
          <span class="ss">source_url: </span><span class="n">highlight</span><span class="p">[</span><span class="s2">"link"</span><span class="p">],</span>
          <span class="ss">category: </span><span class="s2">"articles"</span><span class="p">,</span>
          <span class="ss">highlighted_at: </span><span class="no">DateTime</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">highlight</span><span class="p">[</span><span class="s2">"created"</span><span class="p">]).</span><span class="nf">iso8601</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}.</span><span class="nf">to_json</span>
  <span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">update_last_saved_highlight_value</span><span class="p">(</span><span class="n">last_highlight_value</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Updating last saved highlight value to </span><span class="si">#{</span><span class="n">last_highlight_value</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">content</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">)</span>
  <span class="n">updated_content</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sr">/LAST_SAVED_HIGHLIGHT=\d+/</span><span class="p">,</span> <span class="s2">"LAST_SAVED_HIGHLIGHT=</span><span class="si">#{</span><span class="n">last_highlight_value</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="no">File</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">,</span> <span class="n">updated_content</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">first_highlight_id</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">page</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="kp">true</span>
  <span class="nb">puts</span> <span class="s2">"Processing Raindrop.io highlights from page </span><span class="si">#{</span><span class="n">page</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">raindrop_highlights</span> <span class="o">=</span> <span class="n">request_raindrop_highlights</span><span class="p">(</span><span class="n">page</span><span class="p">)[</span><span class="s2">"items"</span><span class="p">]</span>

  <span class="k">if</span> <span class="n">raindrop_highlights</span><span class="p">.</span><span class="nf">empty?</span>
    <span class="nb">puts</span> <span class="s2">"No more highlights to process"</span>
    <span class="n">update_last_saved_highlight_value</span><span class="p">(</span><span class="n">first_highlight_id</span><span class="p">)</span>
    <span class="nb">exit</span>
  <span class="k">end</span>

  <span class="n">raindrop_highlights</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">highlight</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="s2">"-&gt; Importing highlight into Readwise (</span><span class="si">#{</span><span class="p">[</span><span class="n">highlight</span><span class="p">[</span><span class="s1">'link'</span><span class="p">],</span> <span class="n">highlight</span><span class="p">[</span><span class="s1">'created'</span><span class="p">]].</span><span class="nf">join</span><span class="p">(</span><span class="s1">', '</span><span class="p">)</span><span class="si">}</span><span class="s2">)"</span>

    <span class="n">saved_highlight</span> <span class="o">=</span> <span class="n">save_highlight_to_readwise</span><span class="p">(</span><span class="n">highlight</span><span class="p">).</span><span class="nf">first</span>

    <span class="n">saved_highlight_id</span> <span class="o">=</span> <span class="n">saved_highlight</span><span class="p">[</span><span class="s2">"modified_highlights"</span><span class="p">].</span><span class="nf">first</span>
    <span class="n">first_highlight_id</span> <span class="o">=</span> <span class="n">saved_highlight_id</span> <span class="k">if</span> <span class="n">first_highlight_id</span><span class="p">.</span><span class="nf">nil?</span>

    <span class="k">if</span> <span class="n">saved_highlight_id</span> <span class="o">==</span> <span class="no">LAST_SAVED_HIGHLIGHT</span>
      <span class="nb">puts</span> <span class="s2">"Reached last saved highlight"</span>
      <span class="n">update_last_saved_highlight_value</span><span class="p">(</span><span class="n">first_highlight_id</span><span class="p">)</span>
      <span class="nb">exit</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blob/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script>