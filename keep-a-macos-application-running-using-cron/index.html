<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script> <link rel=canonical href=https://kevinjalbert.com/keep-a-macos-application-running-using-cron/> <title>Keep a macOS Application Running using cron | Kevin Jalbert</title> <meta name=description content="Read how I use cron to keep the RescueTime Application running. I was frustrated at RescueTime crashing and not recording data for a whole week."/> <meta name=keywords content="macos, tools, cron"/> <meta name=datePublished content="2021-05-28 00:00:00 UTC"/> <meta property="og:article:published_time" content="2021-05-28 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2021-05-28 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/keep-a-macos-application-running-using-cron/"/> <meta property="og:url" content="https://kevinjalbert.com/keep-a-macos-application-running-using-cron/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="Read how I use cron to keep the RescueTime Application running. I was frustrated at RescueTime crashing and not recording data for a whole week."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/2021-05-28-keep-a-macos-application-running-using-cron/rescuetime-email.png"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Keep a macOS Application Running using cron"/> <meta property="og:description" content="Read how I use cron to keep the RescueTime Application running. I was frustrated at RescueTime crashing and not recording data for a whole week."/> <meta property="og:image" content="https://kevinjalbert.com/images/2021-05-28-keep-a-macos-application-running-using-cron/rescuetime-email.png"/> <meta property="og:title" content="Keep a macOS Application Running using cron"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Keep a macOS Application Running using cron",
       "keywords": "macos, tools, cron",
       "url": "https://kevinjalbert.com/keep-a-macos-application-running-using-cron/",
       "datePublished": "2021-05-28 00:00:00 UTC",
       "dateModified": "2021-05-28 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/keep-a-macos-application-running-using-cron/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> <script async src="/vendor/analytics/index.js"></script> <script async src="https://www.google-analytics.com/analytics.js"></script> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Keep a macOS Application Running using cron</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">May 28, 2021 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>2 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/keep-a-macos-application-running-using-cron/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/cron/">cron</a> <a href="/tags/macos/">macos</a> <a href="/tags/tools/">tools</a> </div> </div> </div> <img src=/images/2021-05-28-keep-a-macos-application-running-using-cron/rescuetime-email.png> <i><p>Screenshot of RescueTime email notifying me it hasn&#39;t been running.</p> </i> <div class=article__separator></div> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> If you enjoy this, consider subscribing to my newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <p style="text-align: center">I aim to publish one article a month</p> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="E-mail address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <p>I have used <a href="https://www.rescuetime.com/ref/31263">RescueTime (Referral Link)</a> for many years at this point. It always disappoints me when I get the email saying that no data was recorded in RescueTime for the last week (see image above article title). For reasons unannounced to me, the macOS menu bar application had stopped running. I use the <a href="https://www.macbartender.com/">Bartender for macOS</a> to hide certain menu bar applications (as they offer little visual value) &ndash; RescueTime is hidden from my view and I never noticed it wasn&rsquo;t running.</p> <p>I needed a way to ensure that the application was kept running if it crashed.</p> <h2>Launch Application in Background using <code>cron</code></h2> <p>I know of <code>cron</code> and how it can run scripts periodically &ndash; I figured this would be the tool to save me here.</p> <p>I quickly put together the following (add this using <code>crontab -e</code>):</p> <div class=highlight><pre class="highlight plaintext"><code>*/5 * * * * open --hide --background /Applications/RescueTime.app
</code></pre></div> <p>Using <a href="https://crontab.guru/#*/5_*_*_*_*">crontab.guru</a> we can see that this will run the <code>open</code> for ResuceTime command every 5 minutes. The <code>--hide</code> and <code>--background</code> ensure that the application doesn&rsquo;t open in an obtrusive manner (i.e., think applications with a GUI).</p> <p>This worked for me &ndash; it opened RescueTime if it was closed out. I even tested this with other applications and it <em>mostly</em> worked as expected. The <em>hide and background</em> flags didn&rsquo;t work for some applications (e.g., Evernote always appears in the forefront for whatever reason).</p> <p>Done deal then right? Wrong. I noticed every now and then a keystroke or two wouldn&rsquo;t register. When I looked at the time it was always on the minute the <code>cron</code> would trigger&hellip; If I had to take a guess, the <code>open</code> was causing focus to switch briefly and would interrupt keystrokes on the current application I was in.</p> <p>I could decrease the frequency that the command would run or&hellip;</p> <h2>Only <code>open</code> if Application isn&rsquo;t Running</h2> <p>My next approach was to only <em>open</em> the application if it wasn&rsquo;t already running. This will prevent the <code>open</code> from triggering multiple times during the day.</p> <div class=highlight><pre class="highlight plaintext"><code># Scroll to see full command (it is one line due to fitting in the crontab)
*/5 * * * * app=Rescuetime; ps aux | grep -v grep | grep -ci $app &gt; /dev/null || open --hide --background /Applications/$app.app
</code></pre></div> <p>If we break this down:</p> <ul> <li><code>app=Rescuetime;</code> sets a variable of what application we&rsquo;re trying to keep open.</li> <li><code>ps aux | grep -v grep | grep -ci $app &gt; /dev/null</code> lists all running processes, excluding the <code>grep</code> process, and finally counting the found lines while <code>grep</code>ing for the application&rsquo;s name. This ends up being a 0 or 1. The STDOUT output is directed to the void so that it doesn&rsquo;t create new <code>mail</code> entries.</li> <li><code>||</code> will conditionally run the next statement if the previous was falsey (i.e., no application was found running)</li> <li><code>open --hide --background /Applications/$app.app</code> opens the specified application</li> </ul> <p>Now this works as expected! I no longer have to worry about RescueTime not running. I might do this for other menubar applications that I like to have active, but are hidden.</p> <p>I haven&rsquo;t tried this on Linux but I suspect you could do something similar (assuming there is an equivalent to <code>open</code>).</p> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blob/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script>