<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script> <link rel=canonical href=https://kevinjalbert.com/start-now-architecture-decision-records/> <title>Start Now: Architecture Decision Records | Kevin Jalbert</title> <meta name=description content="Stop asking questions about certain architectural decisions for a project. Implement Architecture Decision Records, and save the team and yourself future headaches."/> <meta name=keywords content="communication, collaboration, architecture"/> <meta name=datePublished content="2018-01-03 00:00:00 UTC"/> <meta property="og:article:published_time" content="2018-01-03 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2018-01-03 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/start-now-architecture-decision-records/"/> <meta property="og:url" content="https://kevinjalbert.com/start-now-architecture-decision-records/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="Stop asking questions about certain architectural decisions for a project. Implement Architecture Decision Records, and save the team and yourself future headaches."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/2018-01-03-start-now-architecture-decision-records/filing-cabinet.jpg"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Start Now: Architecture Decision Records"/> <meta property="og:description" content="Stop asking questions about certain architectural decisions for a project. Implement Architecture Decision Records, and save the team and yourself future headaches."/> <meta property="og:image" content="https://kevinjalbert.com/images/2018-01-03-start-now-architecture-decision-records/filing-cabinet.jpg"/> <meta property="og:title" content="Start Now: Architecture Decision Records"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Start Now: Architecture Decision Records",
       "keywords": "communication, collaboration, architecture",
       "url": "https://kevinjalbert.com/start-now-architecture-decision-records/",
       "datePublished": "2018-01-03 00:00:00 UTC",
       "dateModified": "2018-01-03 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/start-now-architecture-decision-records/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> <script async src="/vendor/analytics/index.js"></script> <script async src="https://www.google-analytics.com/analytics.js"></script> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Start Now: Architecture Decision Records</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">January 3, 2018 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>7 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/start-now-architecture-decision-records/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/architecture/">architecture</a> <a href="/tags/collaboration/">collaboration</a> <a href="/tags/communication/">communication</a> </div> </div> </div> <img src=/images/2018-01-03-start-now-architecture-decision-records/filing-cabinet.jpg> <i><p><a href="https://flickr.com/photos/mightymightymatze/2150298078" title="Filing cabinet">Filing cabinet</a> by <a href="https://flickr.com/people/mightymightymatze">mightymightymatze</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc/2.0/">CC BY-NC</a></p> </i> <div class=article__separator></div> <p>While working on any project, you&rsquo;ll eventually need to make decisions regarding the task at hand. The decision that has to be made can vary in size and impact. Often we are in the context of a team, and these decisions are made in consultation with others. As time progresses, with new and old team members moving on and off the project, we&rsquo;ll start to question some of those decisions that were made in the past.</p> <blockquote> <p>Why was it done that way?</p> <p>Did we not consider this alternative?</p> <p>What was the context when that decision was made?</p> </blockquote> <p>Save the team and yourself future headaches and plan accordingly for these types of questions now, by starting Architecture Decision Records (ADRs) for your project.</p> <h1>What are ADRs?</h1> <p>I first read about ADRs in the <a href="http://thinkrelevance.com/blog/2011/11/15/documenting-architecture-decisions">documenting architecture decisions</a> blog post by <a href="http://thinkrelevance.com/team/members/michael-nygard">Michael Nygard</a>. ADRs are a form of documentation that record any <em>architecturally significant</em> decisions that impact a project. For an impact to be considered <em>architecturally significant</em> within a software project context, Micheal stated:</p> <blockquote> <p>&hellip; those that affect the structure, non-functional characteristics, dependencies, interfaces, or construction techniques.</p> </blockquote> <p>Michael&rsquo;s blog post was focused on ADRs within the context of an agile software project, but I believe it can be applied across different domains. The affected values for what a decision might impact would have to be altered to suit the appropriate domain. For example, altering the customer support workflow could constitute a decision record as it significantly changes a business process.</p> <p>I had recently read that <a href="https://www.thoughtworks.com/radar/techniques/lightweight-architecture-decision-records">lightweight architecture decision records</a> had made it into the <em>adopt</em> ring of <a href="https://www.thoughtworks.com/radar">Thoughtworks Technology Radar</a> in the November 2017 edition. They note that the lightweight aspect of ADRs is to just have text/markdown files alongside software projects in their repositories.</p> <p>Here is an example ADR (pretty meta as it is about starting ADRs):</p> <div class=highlight><pre class="highlight markdown"><code><span class="gh"># 1. Record architecture decisions</span>

Date: 2018-01-03

<span class="gu">## Status</span>

Accepted

<span class="gu">## Context</span>

We need to record the architectural decisions made on this project.

<span class="gu">## Decision</span>

We will use Architecture Decision Records, as described by Michael Nygard in this article: http://thinkrelevance.com/blog/2011/11/15/documenting-architecture-decisions

<span class="gu">## Consequences</span>

See Michael Nygard's article, linked above. For a lightweight ADR toolset, see Nat Pryce's _adr-tools_ at https://github.com/npryce/adr-tools.
</code></pre></div> <p>I don&rsquo;t want to go into technical details of ADRs, as this blog post is to bring awareness to them, as well as tools/techniques around them. There is plenty of supplementary material in this blog post via links to other articles.</p> <h1>Getting Started with ADRs</h1> <p>The biggest thing when adopting ADRs in your project is being consistent with them. As with any added process, it&rsquo;s easy to simply overlook the new parts if they aren&rsquo;t at the forefront of your mind. Within our software projects, we actually incorporate ADR consideration in our <a href="https://help.github.com/articles/creating-a-pull-request-template-for-your-repository/">GitHub pull request template</a>. It&rsquo;s a good idea to make sure all team members are all in agreement with using ADRs, as well as when to make one. You don&rsquo;t want a decision to be made that is not documented.</p> <h2>Simplify ADRs with <code>adr-tools</code></h2> <p>In addition to including a note about ADRs in our pull request template, there is more tooling to help out. In the spirit of being lightweight records, markdown files are the preferred way to write ADRs. The <a href="https://github.com/npryce/adr-tools"><code>adr-tools</code> command line tool</a> is a great way to simplify the creation of ADRs. If you are on MacOS, back in May 2017, I got <a href="https://github.com/Homebrew/homebrew-core/pull/13081">adr-tools accepted into homebrew</a>, so now you can just <code>brew install adr-tools</code>.</p> <p>There are a lot of configurations and features that exist within <code>adr-tools</code>. I&rsquo;m going to go over some of the essentials, with examples. I highly recommend taking a deeper look into the tool itself to get the most out of it.</p> <h3>Initialize Repository</h3> <p>With a new repository, you get started with <code>adr init</code>, which creates the following <code>doc/adr/0001-record-architecture-decisions.md</code> file for you. The contents of this ADR is actually the sample one presented above.</p> <h3>Create New ADRs</h3> <p>When you want to add a new ADR, you can execute <code>adr new &quot;Split up component XXXX into two modules&quot;</code> which opens up a basic ADR template to fill in. It creates the next incremented ADR &ndash; <code>doc/adr/0002-split-up-component-xxxx-into-two-modules.md</code>.</p> <h3>Maintain Table of Contents</h3> <p>Most software projects have a <code>README.md</code> file. When working with ADRs, I include a hyperlink to <code>/doc/adr/README.md</code>. This file can be generated using <code>adr generate toc &gt; ./doc/adr/README.md</code>, and ends up creating a nice table of contents of the current ADRs:</p> <div class=highlight><pre class="highlight markdown"><code><span class="gh"># Architecture Decision Records</span>
<span class="p">
*</span> <span class="p">[</span><span class="nv">1. Record architecture decisions</span><span class="p">](</span><span class="sx">0001-record-architecture-decisions.md</span><span class="p">)</span>
<span class="p">*</span> <span class="p">[</span><span class="nv">2. Split up component XXXX into two modules</span><span class="p">](</span><span class="sx">0002-split-up-component-xxxx-into-two-modules.md</span><span class="p">)</span>
</code></pre></div> <h3>Superseding Existing ADRs</h3> <p>Eventually, you will have a decision which is somehow <em>linked</em> to another ADR. A great example of this is a new ADR which supersedes an older decision. First let us make a new ADR <code>adr new -s 2 &quot;Combine modules back into one component&quot;</code>, which ends up superseding our earlier decision. This will actually modify the ADR&rsquo;s <em>status</em> section by adding the following:</p> <div class=highlight><pre class="highlight markdown"><code><span class="gh"># In 0002-split-up-component-xxxx-into-two-modules.md</span>
Superseded by <span class="p">[</span><span class="nv">3. Combine modules back into one component</span><span class="p">](</span><span class="sx">0003-combine-modules-back-into-one-component.md</span><span class="p">)</span>
</code></pre></div><div class=highlight><pre class="highlight markdown"><code><span class="gh"># In 0003-combine-modules-back-into-one-component.md</span>
Superseds <span class="p">[</span><span class="nv">2. Split up component XXXX into two modules</span><span class="p">](</span><span class="sx">0002-split-up-component-xxxx-into-two-modules.md</span><span class="p">)</span>
</code></pre></div> <p>It is useful to see how ADRs relate to each other. In our example, we&rsquo;re indicating one ADR that supersedes another. It is possible to use <code>adr link</code> to specifically tailor the link to use different wording, so you can be specific in how ADRs are associated. Ultimately, linking provides additional context surrounding linked decisions.</p> <h3>Visualizing ADRs</h3> <p>With the ability to <em>link</em> ADRs together, it now becomes possible to trace the story of a specific ADR. By following links you can understand the <em>bigger picture</em> of how the architecture evolved over time. It can be hard to navigate one file at a time, so fortunately for us, <code>adr-tools</code> has us covered by being able to produce a visualization of the ADRs.</p> <p>With <code>adr generate graph | dot -Tjpg &gt; graph.jpg</code> we can generate the following image (using our example ADRs so far):</p> <p><img alt=Graph width=390 height=271 src="/images/2018-01-03-start-now-architecture-decision-records/graph.jpg"/></p> <p>It is quite apparent to see the ADR links in this diagram. I personally have not seen how well this scales, although it still is a good technique to be aware of.</p> <p>Using <code>adr generate graph</code> by itself will return a <a href="https://graphviz.gitlab.io/">graphviz</a> output. It would be interesting to attach this to the <code>/doc/adr/README.md</code> using the <a href="https://github.com/TLmaK0/gravizo">gravizo</a> service. This way, the ADR visualization is always within reach and can be apart of the normal process when adding new ADRs. I have not personally done this approach, but it looks interesting.</p> <h2>Searching ADRs</h2> <p>As we&rsquo;re just dealing with markdown files, it becomes trivial to search through the ADRs. The file names are the titles, so even at a glance, it becomes easy to narrow down what you are looking for. You can even use <code>adr list</code> to just list all the ADRs. In combination with other command line tools (i.e., grep) you can filter the list. I personally like using the <a href="https://github.com/junegunn/fzf"><code>fzf</code> command line tool</a> to filter the list and open it in vim: <code>adr list | fzf | xargs vim</code>.</p> <p>If you want to dig deeper you can search the contents of the files for what you are looking for. For example, <code>grep -l &#39;tool&#39; ./doc/adr/*.md | fzf | xargs vim</code> would look for any file with <em>tool</em> in it, and present the <code>fzf</code> interface for further filtering.</p> <p>In the end, you can be creative on how you search through ADRs &ndash; there is a lot of flexibility built into it. I usually use the <a href="https://github.com/aykamko/tag"><code>tag</code> command line tool</a> for searching within files.</p> <h2>Customizing ADRs</h2> <p>At this point, you might be thinking <em>&ldquo;ADRs sound great, but it doesn&rsquo;t quite satisfy all my needs&rdquo;</em>. The concept of ADRs is very general and flexible in nature so that if you have specific needs or requirements, you can customize it. In our case, we&rsquo;ve been using <code>adr-tools</code> and it has a base template. You can change it, or use a different template. For example, it might be useful to look through <a href="https://github.com/joelparkerhenderson/architecture_decision_record">other templates</a> to find one that fits your needs.</p> <p>This post has been talking about using markdown files, but your ADRs could be held in any other medium (i.e., JIRA, Google Docs, etc&hellip;). I would argue to use what works best for your team. In most cases, within a software project, the markdown approach is nice as it&rsquo;s very lightweight and everything is contained in the source directory.</p> <h1>TL;DR</h1> <ul> <li>ADRs are a great way keep records of architectural decisions</li> <li>ADRs provide context surrounding architectural decisions</li> <li>ADRs can be lightweight as markdown files that live within your project&rsquo;s repository</li> <li>ADRs are searchable and customizable</li> </ul> <blockquote> <p><em>The best time to start ADRs is at the start of a project; the second best time is right now</em></p> </blockquote> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> Signup for my Newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="email address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blob/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script>