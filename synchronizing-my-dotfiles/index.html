<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <script>addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script> <link rel=canonical href=https://kevinjalbert.com/synchronizing-my-dotfiles/> <title>Synchronizing my dotfiles | Kevin Jalbert</title> <meta name=description content="Overtime, you accumulate a set of configurations and dotfiles. To ensure a consistent environments across machines you want to have access to the same dotfiles. I share my synchronization approach ..."/> <meta name=keywords content="tools, learning, dotfiles"/> <meta name=datePublished content="2017-09-28 00:00:00 UTC"/> <meta property="og:article:published_time" content="2017-09-28 00:00:00 UTC"/> <meta name=author content="Kevin Jalbert"/> <meta property="og:article:author" content="2017-09-28 00:00:00 UTC"/> <meta name=url content="https://kevinjalbert.com/synchronizing-my-dotfiles/"/> <meta property="og:url" content="https://kevinjalbert.com/synchronizing-my-dotfiles/"/> <meta name=site content="Kevin Jalbert"/> <meta property="og:site_name" content="Kevin Jalbert"/> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:creator" content="@kevinjalbert"/> <meta name="twitter:description" content="Overtime, you accumulate a set of configurations and dotfiles. To ensure a consistent environments across machines you want to have access to the same dotfiles. I share my synchronization approach along with how to keep the private and public information separate."/> <meta name="twitter:image:src" content="https://kevinjalbert.com/images/2017-09-28-synchronizing-my-dotfiles/github-dotfiles.jpg"/> <meta name="twitter:site" content="Kevin Jalbert"/> <meta name="twitter:title" content="Synchronizing my dotfiles"/> <meta property="og:description" content="Overtime, you accumulate a set of configurations and dotfiles. To ensure a consistent environments across machines you want to have access to the same dotfiles. I share my synchronization approach along with how to keep the private and public information separate."/> <meta property="og:image" content="https://kevinjalbert.com/images/2017-09-28-synchronizing-my-dotfiles/github-dotfiles.jpg"/> <meta property="og:title" content="Synchronizing my dotfiles"/> <script type="application/ld+json">
    {
       "@context": "http://schema.org",
       "@type": "BlogPosting",
       "headline": "Synchronizing my dotfiles",
       "keywords": "tools, learning, dotfiles",
       "url": "https://kevinjalbert.com/synchronizing-my-dotfiles/",
       "datePublished": "2017-09-28 00:00:00 UTC",
       "dateModified": "2017-09-28 00:00:00 UTC",
       "author": {
         "@type": "Person",
         "name": "Kevin Jalbert",
         "sameAs": [
           "https://twitter.com/kevinjalbert",
           "https://github.com/kevinjalbert",
           "https://keybase.io/kevinjalbert",
           "https://reddit.com/user/kevinjalbert"
         ]
       },
       "mainEntityOfPage": {
          "@type": "WebPage",
         "@id": "https://kevinjalbert.com/synchronizing-my-dotfiles/"
       }
    }
  </script> <link href="/stylesheets/app.css" rel=stylesheet /> <link rel=alternate type="application/atom+xml" title="Articles | Kevin Jalbert" href="/feed.xml"/> <script async src="/vendor/analytics/index.js"></script> <script async src="https://www.google-analytics.com/analytics.js"></script> </head> <div class=container> <div class=header> <div class="col-xs-12 col-sm-7 navigation"> <a class=banner href="/">Kevin Jalbert</a> <a href="/about/">About</a> <a href="/now/">Now</a> <a href="/uses/">Uses</a> <a href="https://github.com/kevinjalbert/ama/blob/master/README.md">AMA</a> </div> <div class="col-xs-12 col-sm-5 search-component"> <input placeholder=Search class="search ui-autocomplete-input ui-corner-all" autocomplete=on> </div> </div> </div> <body> <div class="container content article"> <div class=row> <div class=col-md-12> <h1 class=article__title><p>Synchronizing my dotfiles</p> </h1> <div class="row article__meta-info"> <div class="col-xs-4 col-md-4"> <div class="article__date entry-date">September 28, 2017 </div> </div> <div class="col-xs-4 col-md-4"> <div class=article__read-time>7 min read</div> </div> <div class="col-xs-4 col-md-4"> <div class=article__comments> <a href="https://kevinjalbert.com/synchronizing-my-dotfiles/#disqus_thread">0 Comments</a> </div> </div> </div> <div class="row article__meta-tags"> <div class="col-xs-12 col-md-12"> <div class=article__tags> <a href="/tags/dotfiles/">dotfiles</a> <a href="/tags/learning/">learning</a> <a href="/tags/tools/">tools</a> </div> </div> </div> <img src=/images/2017-09-28-synchronizing-my-dotfiles/github-dotfiles.jpg> <i><p><a href="https://github.com/kevinjalbert/dotfiles">My dotfiles repository on GitHub</a></p> </i> <div class=article__separator></div> <p>I always strive to <a href="/share-your-bag-of-tricks/">share my bag of tricks</a>. Hosting <a href="https://github.com/kevinjalbert/dotfiles">my dotfiles on GitHub</a> is one way I can share the tricks and tips I&rsquo;ve picked up over time. In addition, this makes it easy to replicate my development environment on another machine if needed.</p> <p>There are some technical challenges I&rsquo;ve had to overcome in open-sourcing my dotfiles. My dotfiles is a living repository, it is constantly changing as I tweak my environment. I recently encountered a situation where I have two physical machines to use for development. I want a simple and comprehensive solution for synchronizing my dotfiles, both the private and public content, between both machines.</p> <h1>What are dotfiles?</h1> <p>Jump right to the next section if you are already familiar with the dotfiles concept. The basic principle is that someone&rsquo;s dotfiles are a set of the files that represent the configurations of applications and utilities (usually consisting of many <em>&lt;dot&gt;files</em>, for example <code>.zshrc</code>).</p> <p>As a developer, we have many tools at our disposal, and in many cases they are essential to our day-to-day work. The main reason to care about your own dotfiles is to ensure that you can replicate your working environment again. That alone is huge if you ever have to move to a new machine. It is a common pattern to push up your dotfiles to the cloud for back up purposes. I have most of mine on GitHub. The following points answer <a href="https://dotfiles.github.io/">why you would want your dotfiles on GitHub</a>:</p> <blockquote> <ul> <li>Backup, restore, and sync the prefs and settings for your toolbox. Your dotfiles might be the most important files on your machine.</li> <li>Learn from the community. Discover new tools for your toolbox and new tricks for the ones you already use.</li> <li>Share what youâ€™ve learned with the rest of us.</li> </ul> </blockquote> <h1>My dotfiles</h1> <p>Since the beginning, I have hosted my dotfiles on GitHub. For the most part, I&rsquo;ve only had one machine for development, and so I would slowly push my tweaks to my dotfiles repository.</p> <p>I&rsquo;ve built up a <a href="https://github.com/kevinjalbert/dotfiles/blob/6585c9a7e1ae1926fcaf2210d48be23a2e988bdb/Rakefile">Rakefile</a> that orchestrates the install/update/backup/uninstall operations of my dotfiles.</p> <p>My dotfiles are specific for MacOS and take advantage of <a href="https://brew.sh/">homebrew</a> to bootstrap the system. In addition, I also use <a href="https://caskroom.github.io/">homebrew cask</a> and <a href="https://github.com/mas-cli/mas">mas</a> to install system applications.</p> <p>As previously mentioned, my dotfiles is a living repository &ndash; it will continue to evolve and change. I make no guarantee that it&rsquo;ll still operate or use the same solution at the time this article was written. The <code>README.md</code> in the repository should always reflect the state of my dotfiles (although admittedly they are lacking as I write this).</p> <h2>Mackup + Dropbox Synchronization</h2> <p>I&rsquo;ve recently stumbled upon <a href="https://github.com/lra/mackup">Mackup</a>, a solution to keep application settings in sync for MacOS/Linux. The concept is pretty simple as per the <a href="https://github.com/lra/mackup#what-does-it-do">What does it do</a> section says in the README:</p> <blockquote> <ul> <li>Back ups your application settings in a safe directory (e.g. Dropbox)</li> <li>Syncs your application settings among all your workstations</li> <li>Restores your configuration on any fresh install in one command line</li> </ul> </blockquote> <p>It has a list of <a href="https://github.com/lra/mackup/tree/master/mackup/applications">support applications</a>, although it also supports <a href="https://github.com/lra/mackup/tree/master/doc#add-support-for-an-application-or-any-file-or-directory">custom file/directory/application</a>.</p> <p>Using Mackup, I can take advantage of:</p> <ul> <li>Backing up configurations of supported applications. This alone is awesome, as there were many application settings that I never bothered to backup.</li> <li>Ability to create custom application configurations defining their symlink-able dotfiles.</li> <li>More battle-tested process for backing up and restoring symlinks.</li> <li>Real-time synchronization of configurations in Dropbox.</li> <li>Private dotfile synchronization in Dropbox.</li> </ul> <h3>Synchronization</h3> <p>Before Mackup, I was using <code>git pull</code> and <code>git push</code> to synchronize <em>deliberate</em> configuration changes. I would have to manually add files I wanted to synchronize to the dotfile repository, along with the initial symlink. On another machine, I would <code>git pull</code> and <em>reinstall</em> to apply the changes.</p> <p>I was fortunate in that I didn&rsquo;t whole-heartedly use this approach with multiple machines at the same time. I suspect there could be conflicts, or lost configurations using this approach.</p> <p>With Mackup and the idea of using dropbox for synchronization, configurations are reflected in near real-time (although applications might have to be restarted on the other machine). To better accommodate the real-time synchronization features, I moved my dotfile repository to dropbox. I also let Mackup handle the backup/restore of symlinks as it has that feature built into it.</p> <p>As Mackup provides a host of support applications, I was able to synchronize much more between environments. As it also has the support for custom application configurations I was able to better declare what I wanted to synchronize.</p> <h3>Public Sharing</h3> <p>One of my main goals was to keep my dotfiles <a href="https://github.com/kevinjalbert/dotfiles/tree/6585c9a7e1ae1926fcaf2210d48be23a2e988bdb">focused and organized</a> from a directory structure perspective. This simplifies the navigation and discoverability for anyone looking at my dotfiles. Each directory contains a specific set of configurations, and through the orchestration system, they get applied to the environment.</p> <p>When adopting Mackup, I decided to shed this and simply adopt the <em>root is my home directory</em> that Mackup uses by default. This isn&rsquo;t pretty, but it removes the <em>mapping</em> of where the file would reside in the system. In retrospect, it actually better reflects where someone would expect to find certain configurations.</p> <p>I define my own <a href="https://github.com/kevinjalbert/dotfiles/tree/5acf8672973e31dace420ad8e8303675094ed4e5/.mackup">custom applications</a> so I can share/synchronize what I desire.</p> <p>As mentioned, Mackup is capabile of synchronizing a bunch of supported applications. I didn&rsquo;t exactly want to put all those up in my repository for sharing. If I don&rsquo;t actively manage the configuration then I don&rsquo;t want to share it. For example, my configurations for <a href="https://github.com/lra/mackup/blob/719efd0a630fc3c6326aab5c84ac12b8509bbbf9/mackup/applications/doxie.cfg">Doxie</a> aren&rsquo;t important, while my vim/zsh configurations are highly curated.</p> <p>To make sure my repository only has the <em>curated</em> configurations that I want to publicly share I use <a href="https://github.com/kevinjalbert/dotfiles/blob/master/.gitignore">whitelisting in the <code>.gitignore</code></a> to selectively publish dotfiles.</p> <p>This approach allows me to take full advantage of synchronizing all configurations between environments, while publically sharing selected configurations in my repository.</p> <h2>The Flow</h2> <h3>Adding files to synchronize</h3> <p>When I use <code>mackup --dry-run backup</code>, I get a list of configurations that have not yet been backed up. This will pick up new applications, as well as new custom configurations I&rsquo;ve added.</p> <p>If I have something custom to backup I will create a new configuration.</p> <div class=highlight><pre class="highlight plaintext"><code>$ cat ~/.mackup/tips.cfg
[application]
name = My tips

[configuration_files]
.tips
</code></pre></div> <p>Now I can run <code>mackup backup</code> and backup the new additions to my dropbox.</p> <p>If I&rsquo;m considering publically sharing this in my dotfiles repository, I&rsquo;ll add the appropriate changes in the <code>.gitignore</code> whitelist.</p> <h3>Restoring files on different environment</h3> <p>Similar to the backup command, I can use <code>mackup --dry-run restore</code> to see a list of configurations that have yet to be restored. This will add new symlinks on the current machine based on the configurations in dropbox.</p> <p>After that, the symlinks will take care of the synchronization of data between the multiple systems in real-time.</p> <h3>Gotchas</h3> <ol> <li><p>Some dotfiles of applications are always changing or overwriting the symlinks. These are hard to handle, and might not even be worth synchronizing between systems. With dropbox, I kept getting notifications of changes to files (i.e., Screenhero did this for me).</p></li> <li><p>You can synchronize whole directories with a symlink. This is great as any new files that appear within it will be handled automatically. The only issue I&rsquo;ve hit with this is when you want to change the scope of the symlinking (i.e., replace the directory with just individual files within it, or vice versa). Just be careful, as in my experience Mackup might not do the backup/restore correctly if you are changing the scope of the symlink.</p></li> <li><p>Concerns with sensitive private keys (GPG/SSH private keys, secret API keys, etc&hellip;), as you are putting them in Dropbox (in the cloud). Some people/organizations will not like this, and you have to be aware of what you are synchronizing.</p></li> <li><p>You can always override an existing Mackup application configuration with a custom one. For example, I wanted to add some additional files for my <a href="https://github.com/kevinjalbert/dotfiles/blob/1c6c2b03169a57708b4487c4af0d52168f9957ef/.mackup/zsh.cfg">ZSH configuration</a>.</p></li> </ol> <h1>TL;DR</h1> <ul> <li>The concept of dotfiles is awesome, especially if you have multiple environments you want to synchronize configurations between.</li> <li>GitHub is a great place to host/explore public dotfiles.</li> <li>Mackup provides a comprehensive synchronization solution for application configurations and files.</li> <li>Using Dropbox as Mackup&rsquo;s storage option provides near real-time synchronization of dotfiles.</li> <li>Make use of <code>.gitignore</code>&rsquo;s whitelisting feature to selectivly share your public dotfiles while staying within Mackup&rsquo;s solution.</li> </ul> <div class=newsletter__form> <div class="panel panel-default"> <div class=panel-heading> <h4 class="panel-title accordion-toggle collapsed" data-toggle=collapse data-parent="#accordion" href="#newsletterFormCollapse"> Signup for my Newsletter </h4> </div> <div id=newsletterFormCollapse class="panel-collapse collapse"> <div class=panel-body> <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel=stylesheet> <style>
              #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
              /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
                 We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style> <div id=mc_embed_signup> <form action="//kevinjalbert.us14.list-manage.com/subscribe/post?u=fe02783eec556cfc2893fe174&amp;id=aecd14f8e6" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <input type=email value="" name=EMAIL class=email id=mce-EMAIL placeholder="email address" required> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_fe02783eec556cfc2893fe174_aecd14f8e6 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> </div> </div> </div> <div class=article__comments-button><button type=button class="btn btn-default show-comments">Click to Disqus</button></div> <div id=disqus_thread></div> </div> </div> </div> <script>
//<![CDATA[
    var disqus_shortname = 'kevinjalbert';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </body> <div class="container footer"> <div class="col-md-12 footer__social"> <a href="https://twitter.com/KevinJalbert">Twitter</a> <a href="https://github.com/kevinjalbert">GitHub</a> <a href="https://stackoverflow.com/users/583592/kevin-jalbert">Stack Overflow</a> </div> <div class="col-md-12 footer__copywrite"> Code licensed <a href="https://github.com/kevinjalbert/kevinjalbert.github.io/blog/real-master/LICENSE">MIT</a>, Content &copy; 2019 Kevin Jalbert </div> </div> </html> <script src="/javascripts/app.js"></script> <div id=amzn-assoc-ad-36830a7e-7ad1-4cf6-983b-8b5b373a62c0></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=36830a7e-7ad1-4cf6-983b-8b5b373a62c0"></script>